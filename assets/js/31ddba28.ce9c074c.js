"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3049],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(a),c=l,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||r;return a?n.createElement(k,i(i({ref:t},d),{},{components:a})):n.createElement(k,i({ref:t},d))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1105:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(7462),l=(a(7294),a(3905));const r={id:"proto",title:"Protocol Versions"},i=void 0,o={unversionedId:"modules/general/proto",id:"modules/general/proto",title:"Protocol Versions",description:'The proto="" attribute specifies what iteration of PGM a certain XML document was created for. It also instructs PGM on whether to allow the usage of deprecated or newly introduced features within a map. If the value is lower than the currently recommended proto version, the map will load but the XML may be interpreted in an outdated way.',source:"@site/docs/modules/general/proto.mdx",sourceDirName:"modules/general",slug:"/modules/general/proto",permalink:"/docs/modules/general/proto",draft:!1,editUrl:"https://github.com/PGMDev/Website/tree/master/src/docs/modules/general/proto.mdx",tags:[],version:"current",frontMatter:{id:"proto",title:"Protocol Versions"},sidebar:"docs",previous:{title:"Main Map Element",permalink:"/docs/modules/general/main"},next:{title:"Broadcasts",permalink:"/docs/modules/information/broadcasts"}},s={},p=[{value:"Map Element",id:"map-element",level:4},{value:"Map Attributes",id:"map-attributes",level:5},{value:"Map Protocol Values",id:"map-protocol-values",level:5},{value:"Map Protocol Changelog",id:"map-protocol-changelog",level:2},{value:"Changes in 1.4.2",id:"changes-in-142",level:3},{value:"Changes in 1.4.0",id:"changes-in-140",level:3},{value:"Changes in 1.3.6",id:"changes-in-136",level:3}],d={toc:p};function m(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},'proto=""')," attribute specifies what iteration of PGM a certain XML document was created for. It also instructs PGM on whether to allow the usage of deprecated or newly introduced features within a map. If the value is lower than the currently recommended proto version, the map will load but the XML may be interpreted in an outdated way."),(0,l.kt)("p",null,"Mapmakers should always use the latest supported proto version, and this may be required of new maps that are to be added to any map compilation projects, such as ",(0,l.kt)("a",{parentName:"p",href:"https://mcresourcepile.github.io"},"ResourcePile"),"."),(0,l.kt)("h4",{id:"map-element"},"Map Element"),(0,l.kt)("div",{className:"table-container"},(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"Map Element"),(0,l.kt)("th",null,"Description"),(0,l.kt)("th",null,"Value/Children"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"<map> </map>")),(0,l.kt)("td",null,"The main map node containing the protocol version to be used."),(0,l.kt)("td",null,(0,l.kt)("span",{className:"badge badge--secondary"},"XML Modules")))))),(0,l.kt)("h5",{id:"map-attributes"},"Map Attributes"),(0,l.kt)("div",{className:"table-container"},(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"Attribute"),(0,l.kt)("th",null,"Description"),(0,l.kt)("th",null,"Value"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"proto")),(0,l.kt)("td",null,(0,l.kt)("span",{className:"badge badge--danger"},"Required"),"The map XML's protocol version."),(0,l.kt)("td",null,(0,l.kt)("span",{className:"badge badge--success"},"Recommended"),(0,l.kt)("label",null,"1.4.2")))))),(0,l.kt)("h5",{id:"map-protocol-values"},"Map Protocol Values"),(0,l.kt)("div",{className:"table-container"},(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"Version"),(0,l.kt)("th",null,"Description"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.4.2")),(0,l.kt)("td",null,"Refer to ",(0,l.kt)("a",{href:"#changes-in-142"},"Changes in 1.4.2"),".")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.4.1")),(0,l.kt)("td",null,(0,l.kt)("span",{className:"badge badge--secondary"},"Note"),"No change in features on PGM. Use ",(0,l.kt)("label",null,"1.4.0")," or ",(0,l.kt)("label",null,"1.4.2")," instead.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.4.0")),(0,l.kt)("td",null,"Filters, regions, and teams are always referenced by its ID (replaces"," ",(0,l.kt)("label",null,"name"),").",(0,l.kt)("br",null),"Disallows ",(0,l.kt)("label",null,"<time>")," inside"," ",(0,l.kt)("label",null,"<score>")," or ",(0,l.kt)("label",null,"<blitz>")," & disallows ",(0,l.kt)("label",null,"<title>")," inside"," ",(0,l.kt)("label",null,"<blitz>"),".",(0,l.kt)("br",null),"Required objectives to define if they are needed to win the match.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.6")),(0,l.kt)("td",null,"Moved all defining elements out of module XML root.",(0,l.kt)("br",null),"Everything scores zero points by default.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.5")),(0,l.kt)("td",null,"Filters are aware of who owns TNT.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.4")),(0,l.kt)("td",null,"Wools must have a location property.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.3")),(0,l.kt)("td",null,"Define how overlapping regions should behave.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.2")),(0,l.kt)("td",null,"Added monument modes.")),(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("label",null,"1.3.1")),(0,l.kt)("td",null,"Off-by-one region bug fixed."))))),(0,l.kt)("h2",{id:"map-protocol-changelog"},"Map Protocol Changelog"),(0,l.kt)("h3",{id:"changes-in-142"},"Changes in 1.4.2"),(0,l.kt)("span",{className:"badge badge--danger"},"Breaking"),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The objectives filter will now always automatically derive team ownership for the objective from context. To match an objective without any specific team, the ",(0,l.kt)("inlineCode",{parentName:"li"},'any="true"')," attribute needs to be specified.",(0,l.kt)("hr",{parentName:"li"}))),(0,l.kt)("span",{class:"badge badge--success"},"New"),(0,l.kt)("br",null),(0,l.kt)("span",{className:"badge badge--secondary"},"Partially implemented")," ",(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Portals, kits, score boxes & structures can now be dynamically applied using dynamic filters. All region types are dynamic, however, only some filter types are dynamic.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Kits now have ",(0,l.kt)("a",{parentName:"li",href:"/docs/modules/gear/kits#dynamic-kits"},(0,l.kt)("inlineCode",{parentName:"a"},"give"),", ",(0,l.kt)("inlineCode",{parentName:"a"},"take")," & ",(0,l.kt)("inlineCode",{parentName:"a"},"lend")," properties"),"."),(0,l.kt)("li",{parentName:"ul"},"Portals have ",(0,l.kt)("a",{parentName:"li",href:"/docs/modules/mechanics/portals#portal-sub-elements"},(0,l.kt)("inlineCode",{parentName:"a"},"forward"),", ",(0,l.kt)("inlineCode",{parentName:"a"},"reverse")," & ",(0,l.kt)("inlineCode",{parentName:"a"},"transit")," properties"),"."),(0,l.kt)("li",{parentName:"ul"},"Structures & ",(0,l.kt)("a",{parentName:"li",href:"/docs/modules/objectives/scoring#score-box-attributes"},"score boxes")," have a ",(0,l.kt)("inlineCode",{parentName:"li"},"trigger")," property."))),(0,l.kt)("li",{parentName:"ul"},"Added a player count filter."),(0,l.kt)("li",{parentName:"ul"},"Added a ",(0,l.kt)("inlineCode",{parentName:"li"},"<grounded/>")," filter to check if the player is standing on the ground."),(0,l.kt)("li",{parentName:"ul"},"Added ",(0,l.kt)("inlineCode",{parentName:"li"},"<match-started/>"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"<match-running/>")," & ",(0,l.kt)("inlineCode",{parentName:"li"},"<match-finished/>")," filters that are used to check the state of the current match."),(0,l.kt)("li",{parentName:"ul"},"New ",(0,l.kt)("inlineCode",{parentName:"li"},"pre-match-physics")," attribute for the terrain module to enable physics events before the match starts."),(0,l.kt)("li",{parentName:"ul"},"Added ",(0,l.kt)("inlineCode",{parentName:"li"},"<observing>")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"<participant>")," filters. Also added an ",(0,l.kt)("inlineCode",{parentName:"li"},"observers")," filter property to portals to restrict observer access."),(0,l.kt)("li",{parentName:"ul"},"Added player rank and score filters. Filters return if the player's rank or score is within the specified range."),(0,l.kt)("li",{parentName:"ul"},"Control points have new ",(0,l.kt)("inlineCode",{parentName:"li"},"recovery")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"decay")," attributes that replace the ",(0,l.kt)("inlineCode",{parentName:"li"},"incremental")," attribute and allow more control of the progress.")),(0,l.kt)("h3",{id:"changes-in-140"},"Changes in 1.4.0"),(0,l.kt)("span",{className:"badge badge--danger"},"Breaking"),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Filters, regions, and kits now use ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," instead of ",(0,l.kt)("inlineCode",{parentName:"p"},"name"),"."),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Keep in mind that IDs are all in the same namespace, so you can not use the same ID for two different types of thing."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Teams have an ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," attribute and are always referenced by it everywhere in the XML, ",(0,l.kt)("strong",{parentName:"p"},"never")," by name.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Standalone filter definitions are no longer wrapped in a ",(0,l.kt)("inlineCode",{parentName:"p"},"<filter>")," tag, they start with an actual filter, just like regions, e.g."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<filters>\n  <team id="only-red">red-team</team>\n</filters>\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The region for an ",(0,l.kt)("inlineCode",{parentName:"p"},"<apply>")," must be either a ",(0,l.kt)("inlineCode",{parentName:"p"},"region")," attribute or a ",(0,l.kt)("inlineCode",{parentName:"p"},"<region>")," sub-element. It cannot appear directly inside the ",(0,l.kt)("inlineCode",{parentName:"p"},"<apply>")," tag.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Inline filters must always be a single tag, multiple tags are not accepted anywhere. To combine multiple filters, always use a compound filter like ",(0,l.kt)("inlineCode",{parentName:"p"},"<all>")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"<any>"),". This change is retroactive, and affects ",(0,l.kt)("em",{parentName:"p"},"all")," proto versions.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"There is no longer a filter type called ",(0,l.kt)("inlineCode",{parentName:"p"},"<block>"),", use ",(0,l.kt)("inlineCode",{parentName:"p"},"<material>")," instead. ",(0,l.kt)("inlineCode",{parentName:"p"},"<block>")," is always interpreted as a region.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The old built-in filters are gone, and there are only two new ones: ",(0,l.kt)("inlineCode",{parentName:"p"},"always")," which is equivalent to ",(0,l.kt)("inlineCode",{parentName:"p"},"allow-all"),", and never which is equivalent to ",(0,l.kt)("inlineCode",{parentName:"p"},"deny-all"),"."),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"All of the new built-ins have equivalent tags of the same name i.e. ",(0,l.kt)("inlineCode",{parentName:"li"},"<always/>")," & ",(0,l.kt)("inlineCode",{parentName:"li"},"<never/>"),"."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"<allow>")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"<deny>")," can now be used anywhere a filter is expected, and actually function how they were supposed to i.e. they cause the filter to be ignored (skipped over) if it does not match.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Blitz titles are no longer a part of the ",(0,l.kt)("a",{parentName:"p",href:"/docs/modules/objectives/blitz"},"Blitz Module"),", instead they are set using the map sub-element ",(0,l.kt)("inlineCode",{parentName:"p"},"<game>")," and can be used with any gamemode.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Match time limit is no longer part of the ",(0,l.kt)("inlineCode",{parentName:"p"},"<score>")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"<blitz>")," module, instead it is defined directly in the root element."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<map proto="1.4.0">\n<time result="objectives">5m</time>\n\x3c!-- Other modules. --\x3e\n</map>\n')),(0,l.kt)("hr",{parentName:"li"}),(0,l.kt)("span",{class:"badge badge--primary"},"Changes"),(0,l.kt)("br",null)),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The top-level tags ",(0,l.kt)("inlineCode",{parentName:"p"},"<filters>")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"<regions>")," are now the same thing. You can define filters, regions, and ",(0,l.kt)("inlineCode",{parentName:"p"},"<apply>"),"s in either one (remember that regions are a type of filter, have been for a while now).")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Any filter tag anywhere can have an ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," attribute.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The ",(0,l.kt)("inlineCode",{parentName:"p"},"<apply>")," tag accepts both references and inline definitions for its ",(0,l.kt)("inlineCode",{parentName:"p"},"region"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"kit"),", and all of its filter properties, e.g. the two tags below are equivalent:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<apply region="effect-pad" kit="effect-kit" filter="only-red" block="only-leaves"/>\n<apply>\n    <region>\n        <cuboid min="1,2,3" max="4,5,6"/> \x3c!-- effect-pad --\x3e\n    </region>\n    <kit>\n        <potion>...</potion> \x3c!-- effect-kit --\x3e\n    </kit>\n    <filter>\n        <team>red-team</team>\n    </filter>\n    <block>\n        <material>leaves</material>\n    </block>\n</apply>\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The ",(0,l.kt)("a",{parentName:"p",href:"/docs/modules/mechanics/spawns#spawn--default-element-attributes"},(0,l.kt)("inlineCode",{parentName:"a"},"safe")," and ",(0,l.kt)("inlineCode",{parentName:"a"},"spread")," attributes")," of spawns can now be combined.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"A items slot attribute is no longer required in kits. This attribute now also accepts Mojang slot names e.g. ",(0,l.kt)("inlineCode",{parentName:"p"},"slot.hotbar.8")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"armor.head"),"."),(0,l.kt)("hr",{parentName:"li"}))),(0,l.kt)("span",{className:"badge badge--success"},"New"),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"There are two built-in regions called ",(0,l.kt)("inlineCode",{parentName:"li"},"everywhere")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"nowhere")," that contain all points and no points, respectively.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"All of the new built-ins have equivalent tags of the same name i.e. ",(0,l.kt)("inlineCode",{parentName:"li"},"<everywhere/>")," & ",(0,l.kt)("inlineCode",{parentName:"li"},"<nowhere/>"),"."))),(0,l.kt)("li",{parentName:"ul"},"A team can have a minimum required size with the ",(0,l.kt)("inlineCode",{parentName:"li"},'min=""')," attribute."),(0,l.kt)("li",{parentName:"ul"},"Objectives have a ",(0,l.kt)("inlineCode",{parentName:"li"},"required")," attribute that specifies if they are required to complete the match.",(0,l.kt)("hr",{parentName:"li"}))),(0,l.kt)("span",{className:"badge badge--info"},"Removed"),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("inlineCode",{parentName:"li"},"<multitrade/>")," tag has been removed, it is now always enabled.")),(0,l.kt)("h3",{id:"changes-in-136"},"Changes in 1.3.6"),(0,l.kt)("span",{className:"badge badge--danger"},"Breaking"),(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Regions for cores, destroyables, wools, portals & score boxes must be defined in a ",(0,l.kt)("inlineCode",{parentName:"p"},"<region>")," sub-element or referenced in a ",(0,l.kt)("inlineCode",{parentName:"p"},"region")," attribute."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<core>\n    <region>\n        <cuboid min="..." max="..."/>\n    </region>\n</core>\n<core region="my-region"/>\n')),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Similarly, spawn regions must be defined in a ",(0,l.kt)("inlineCode",{parentName:"p"},"<regions>")," sub-element or referenced in a ",(0,l.kt)("inlineCode",{parentName:"p"},"regions")," attribute."),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<spawns>\n    <spawn team="red">\n        <regions yaw="90">\n            <cuboid min="1,0,2" max="3,0,4"/>\n            <cylinder base="7,8,9" radius="5" height="0"/>\n        </regions>\n    </spawn>\n</spawns>\n'))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Everything scores 0 points by default, this means you have to explicitly define ",(0,l.kt)("inlineCode",{parentName:"p"},"<kills>")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"<deaths>")," in the score module if you want players to get points for killing players."))))}m.isMDXComponent=!0}}]);